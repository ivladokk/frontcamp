!function(e){var t={};function n(c){if(t[c])return t[c].exports;var s=t[c]={i:c,l:!1,exports:{}};return e[c].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,c){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:c})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var c=Object.create(null);if(n.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(c,s,function(t){return e[t]}.bind(null,s));return c},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t){e.exports=class{static show(){document.getElementById("loading").classList.add("show-mask")}static hide(){document.getElementById("loading").classList.remove("show-mask")}}},function(e,t,n){"use strict";n.r(t);n(6);const c=new(n(2));document.addEventListener("DOMContentLoaded",c.init.bind(c))},function(e,t,n){const c=n(3),s=n(4),a=n(5);e.exports=class{constructor(){this.config={apiUrl:"https://newsapi.org/v2/",apiKey:"788080c99995412c9c08fb95499225a2",languages:["all","ar","de","en","es","fr","he","it","nl","no","pt","ru","se","ud","zh"],countries:["all","ae","ar","at","au","be","bg","br","ca","ch","cn","co","cu","cz","de","eg","fr","gb","gr","hk","hu","id","ie","il","in","it","jp","kr","lt","lv","ma","mx","my","ng","nl","no","nz","ph","pl","pt","ro","rs","ru","sa","se","sg","si","sk","th","tr","tw","ua","us","ve","za"],categories:["all","business","entertainment","general","health","science","sports","technology"]},this.dataService=new c(this.config),this.selectedSources=new Set}_createCheckedSource(e){let t=document.createElement("div");t.classList.add("source-checked");let n=document.createElement("span");n.classList.add("source-checked-name");let c=document.createTextNode(e.name);n.appendChild(c);let s=document.createElement("span");s.classList.add("delete-btn");let a=document.createTextNode("x");return s.appendChild(a),s.onclick=(n=>{this.selectedSources.delete(e),t.parentNode.removeChild(t)}),t.appendChild(n),t.appendChild(s),t}_setDropdownValues(e,t){for(let n of t){let t=document.createElement("option");t.value=n,t.text=n,e.appendChild(t)}}init(){this._setDropdownValues(document.getElementById("source-language"),this.config.languages),this._setDropdownValues(document.getElementById("source-country"),this.config.countries),this._setDropdownValues(document.getElementById("source-category"),this.config.categories),this._setDropdownValues(document.getElementById("language"),this.config.languages),document.getElementById("get_news").addEventListener("click",()=>this.getNews(),!1),document.getElementById("get_top_news").addEventListener("click",()=>this.getTopNews(),!1),document.getElementById("select_src").addEventListener("click",()=>this.selectSrc(),!1)}async selectSrc(){let e=new a(this.dataService),t=await e.getResultAsync();t&&this._fillSelectedSources(t)}_fillSelectedSources(e){this.selectedSources=e;let t=document.getElementById("sources-checked-list");for(;t.firstChild;)t.removeChild(t.firstChild);for(const e of this.selectedSources)t.appendChild(this._createCheckedSource(e))}_combineFilter(){let e=[];for(let t of this.selectedSources)e.push(t.id);return{...{q:document.getElementById("q").value,sources:e,language:document.getElementById("language").value}}}getNews(){new s(this.dataService).getNews(this._combineFilter())}getTopNews(){new s(this.dataService).getNews(this._combineFilter())}}},function(e,t){e.exports=class{constructor(e){this._config=e}async getSourcesAsync(e){let t="";e.language&&"all"!==e.language&&this._config.languages.includes(e.language)&&(t+=t+"language="+e.language+"&"),e.country&&"all"!==e.country&&this._config.countries.includes(e.country)&&(t+=t+"country="+e.country+"&"),e.category&&"all"!==e.category&&this._config.categories.includes(e.category)&&(t+=t+"category="+e.country+"&");let n=`${this._config.apiUrl}/sources?${t}apiKey=${this._config.apiKey}`,c=new Request(n),s=await fetch(c);if(s.ok)return await s.json();throw new Error(s.status)}_getParams(e){let t="";return e.q&&(t+=t+"q="+e.q+"&"),e.sources&&e.sources.length>0&&(t+=t+"sources="+e.sources.toString()+"&"),e.language&&"all"!==e.language&&(t+=t+"language="+e.language+"&"),e.country&&"all"!==e.country&&(t+=t+"country="+e.country+"&"),e.category&&"all"!==e.category&&(t+=t+"category="+e.country+"&"),t}async getNewsAsync(e,t){let n=`${this._config.apiUrl}/${e}?${this._getParams(t)}apiKey=${this._config.apiKey}`,c=new Request(n),s=await fetch(c);if(s.ok)return await s.json();throw new Error(s.status)}}},function(e,t,n){const c=n(0);e.exports=class{constructor(e){this._dataService=e}getNews(e){c.show(),this._dataService.getNewsAsync("everything",e).then(e=>{e.articles&&this._fillArticles(e.articles)}).finally(()=>c.hide()).catch(e=>{alert(`Something went wrong...${e}`)})}getTopNews(e){c.show(),this._dataService.getNewsAsync("top-headline",e).then(e=>{e.articles&&this._fillArticles(e.articles)}).finally(()=>c.hide()).catch(e=>{alert(`Something went wrong...${e}`)})}_fillArticles(e){let t=document.getElementById("results");for(;t.firstChild;)t.removeChild(t.firstChild);e.map(e=>{let t=this._createNewsCard(e);document.getElementById("results").appendChild(t)})}_createNewsCard(e){let t=document.createElement("div");t.classList.add("news-card");let n=document.createElement("div");n.classList.add("news-card-header"),e.urlToImage?(n.style.background=`url('${e.urlToImage}')`,n.style.backgroundSize="cover",n.style.backgroundRepeat="no-repeat"):n.classList.add("news-card-header--no-cover");let c=document.createElement("div");c.classList.add("news-card-author");let s=document.createElement("span");c.appendChild(document.createTextNode(e.author)),c.appendChild(s);let a=document.createElement("div");a.classList.add("news-card-source");let l=document.createElement("span");l.appendChild(document.createTextNode(e.source.name)),a.appendChild(l),n.appendChild(c),n.appendChild(a),t.appendChild(n);let r=document.createElement("div");r.classList.add("news-card-body");let o=document.createElement("h4");o.appendChild(document.createTextNode(e.title)),o.classList.add("news-card-title");let d=document.createElement("p");d.appendChild(document.createTextNode(e.description)),d.classList.add("news-card-description");let i=document.createElement("a");return i.appendChild(document.createTextNode("See more")),i.setAttribute("href",e.url),r.appendChild(o),r.appendChild(d),r.appendChild(i),t.appendChild(r),t}}},function(e,t,n){const c=n(0);e.exports=class{constructor(e){this.dataService=e,this.selected=new Set;let t=document.getElementById("find_btn"),n=t.cloneNode(!0);t.parentNode.replaceChild(n,t),document.getElementById("find_btn").addEventListener("click",e=>this.findSources(),!1)}getResultAsync(){return this._openModal(),new Promise((e,t)=>{document.getElementById("submint_src").addEventListener("click",t=>{this._closeModal(),e(this.selected)},!1),document.getElementById("src_close").addEventListener("click",t=>{this._closeModal(),e([])},!1)})}_openModal(){this._clearSrc(),document.getElementById("overlay").classList.add("active"),document.getElementById("modal").classList.add("active")}_closeModal(){document.getElementById("overlay").classList.remove("active"),document.getElementById("modal").classList.remove("active")}_createSourceItem(e){let t=document.createElement("div");t.classList.add("source-item"),t.id=e.id;let n=document.createElement("span");n.classList.add("source-name");let c=document.createTextNode(e.name);return n.appendChild(c),t.appendChild(n),t.onclick=(n=>{this.selected.has(e)?(t.classList.remove("checked"),this.selected.delete(e)):(t.classList.add("checked"),this.selected.add(e))}),t}findSources(){let e={language:document.getElementById("source-language").value,category:document.getElementById("source-category").value,country:document.getElementById("source-country").value};c.show(),this.dataService.getSourcesAsync(e).then(e=>{this.selected.clear(),this._clearSrc();let t=document.getElementById("sources-items");e.sources.map(e=>{let n=this._createSourceItem(e);t.appendChild(n)})}).catch(e=>{alert(`Something went wrong...${e}`)}).finally(()=>c.hide())}_clearSrc(){let e=document.getElementById("sources-items");for(;e.firstChild;)e.removeChild(e.firstChild)}}},function(e,t){}]);